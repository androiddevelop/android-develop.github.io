!function(a,b){"undefined"!=typeof module&&module.exports?module.exports=b(require("jquery")):"function"==typeof define&&define.amd?define(["jquery"],function(c){return b(c)}):b(a.jQuery)}(this,function(b){var c=function(d,e){this.$element=b(d),this.options=b.extend({},b.fn.typeahead.defaults,e),this.matcher=this.options.matcher||this.matcher,this.sorter=this.options.sorter||this.sorter,this.select=this.options.select||this.select,this.autoSelect="boolean"==typeof this.options.autoSelect?this.options.autoSelect:!0,this.highlighter=this.options.highlighter||this.highlighter,this.render=this.options.render||this.render,this.updater=this.options.updater||this.updater,this.displayText=this.options.displayText||this.displayText,this.source=this.options.source,this.delay=this.options.delay,this.$menu=b(this.options.menu),this.$appendTo=this.options.appendTo?b(this.options.appendTo):null,this.shown=!1,this.listen(),this.showHintOnFocus="boolean"==typeof this.options.showHintOnFocus?this.options.showHintOnFocus:!1,this.afterSelect=this.options.afterSelect,this.addItem=!1};c.prototype={constructor:c,select:function(){var d=this.$menu.find(".active").data("value");if(this.$element.data("active",d),this.autoSelect||d){var e=this.updater(d);this.$element.val(this.displayText(e)||e).change(),this.afterSelect(e)}return this.hide()},updater:function(d){return d},setSource:function(d){this.source=d},show:function(){var d,e=b.extend({},this.$element.position(),{height:this.$element[0].offsetHeight});return d="function"==typeof this.options.scrollHeight?this.options.scrollHeight.call():this.options.scrollHeight,(this.$appendTo?this.$menu.appendTo(this.$appendTo):this.$menu.insertAfter(this.$element)).css({top:e.top+e.height+d,left:e.left}).show(),this.shown=!0,this},hide:function(){return this.$menu.hide(),this.shown=!1,this},lookup:function(d){if(this.query="undefined"!=typeof d&&null!==d?d:this.$element.val()||"",this.query.length<this.options.minLength){return this.shown?this.hide():this}var e=b.proxy(function(){b.isFunction(this.source)?this.source(this.query,b.proxy(this.process,this)):this.source&&this.process(this.source)},this);clearTimeout(this.lookupWorker),this.lookupWorker=setTimeout(e,this.delay)},process:function(d){var e=this;return d=b.grep(d,function(f){return e.matcher(f)}),d=this.sorter(d),d.length||this.options.addItem?(d.length>0?this.$element.data("active",d[0]):this.$element.data("active",null),this.options.addItem&&d.push(this.options.addItem),"all"==this.options.items?this.render(d).show():this.render(d.slice(0,this.options.items)).show()):this.shown?this.hide():this},matcher:function(d){var e=this.displayText(d);return ~e.toLowerCase().indexOf(this.query.toLowerCase())},sorter:function(n){for(var o,d=[],e=[],f=[];o=n.shift();){var m=this.displayText(o);m.toLowerCase().indexOf(this.query.toLowerCase())?~m.indexOf(this.query)?e.push(o):f.push(o):d.push(o)}return d.concat(e,f)},highlighter:function(d){var e,f,g,h,i,j=b("<div></div>"),s=this.query,t=d.toLowerCase().indexOf(s.toLowerCase());if(e=s.length,0===e){return j.text(d).html()}for(;t>-1;){f=d.substr(0,t),g=d.substr(t,e),h=d.substr(t+e),i=b("<strong></strong>").text(g),j.append(document.createTextNode(f)).append(i),d=h,t=d.toLowerCase().indexOf(s.toLowerCase())}return j.append(document.createTextNode(d)).html()},render:function(d){var e=this,f=this,j=!1;return d=b(d).map(function(i,g){var h=f.displayText(g);return i=b(e.options.item).data("value",g),i.find("a").html(e.highlighter(h)),h==f.$element.val()&&(i.addClass("active"),f.$element.data("active",g),j=!0),i[0]}),this.autoSelect&&!j&&(d.first().addClass("active"),this.$element.data("active",d.first().data("value"))),this.$menu.html(d),this},displayText:function(d){return d.name||d},next:function(){var d=this.$menu.find(".active").removeClass("active"),e=d.next();e.length||(e=b(this.$menu.find("li")[0])),e.addClass("active")},prev:function(){var d=this.$menu.find(".active").removeClass("active"),e=d.prev();e.length||(e=this.$menu.find("li").last()),e.addClass("active")},listen:function(){this.$element.on("focus",b.proxy(this.focus,this)).on("blur",b.proxy(this.blur,this)).on("keypress",b.proxy(this.keypress,this)).on("keyup",b.proxy(this.keyup,this)),this.eventSupported("keydown")&&this.$element.on("keydown",b.proxy(this.keydown,this)),this.$menu.on("click",b.proxy(this.click,this)).on("mouseenter","li",b.proxy(this.mouseenter,this)).on("mouseleave","li",b.proxy(this.mouseleave,this))},destroy:function(){this.$element.data("typeahead",null),this.$element.data("active",null),this.$element.off("focus").off("blur").off("keypress").off("keyup"),this.eventSupported("keydown")&&this.$element.off("keydown"),this.$menu.remove()},eventSupported:function(d){var e=d in this.$element;return e||(this.$element.setAttribute(d,"return;"),e="function"==typeof this.$element[d]),e},move:function(d){if(this.shown){switch(d.keyCode){case 9:case 13:case 27:d.preventDefault();break;case 38:if(d.shiftKey){return}d.preventDefault(),this.prev();break;case 40:if(d.shiftKey){return}d.preventDefault(),this.next()}d.stopPropagation()}},keydown:function(d){this.suppressKeyPressRepeat=~b.inArray(d.keyCode,[40,38,9,13,27]),this.shown||40!=d.keyCode?this.move(d):this.lookup()},keypress:function(d){this.suppressKeyPressRepeat||this.move(d)},keyup:function(d){switch(d.keyCode){case 40:case 38:case 16:case 17:case 18:break;case 9:case 13:if(!this.shown){return}this.select();break;case 27:if(!this.shown){return}this.hide();break;default:this.lookup()}d.stopPropagation(),d.preventDefault()},focus:function(){this.focused||(this.focused=!0,this.options.showHintOnFocus&&this.lookup(""))},blur:function(){this.focused=!1,!this.mousedover&&this.shown&&this.hide()},click:function(d){d.stopPropagation(),d.preventDefault(),this.select(),this.$element.focus()},mouseenter:function(d){this.mousedover=!0,this.$menu.find(".active").removeClass("active"),b(d.currentTarget).addClass("active")},mouseleave:function(){this.mousedover=!1,!this.focused&&this.shown&&this.hide()}};var a=b.fn.typeahead;b.fn.typeahead=function(d){var e=arguments;return"string"==typeof d&&"getActive"==d?this.data("active"):this.each(function(){var f=b(this),g=f.data("typeahead"),j="object"==typeof d&&d;g||f.data("typeahead",g=new c(this,j)),"string"==typeof d&&(e.length>1?g[d].apply(g,Array.prototype.slice.call(e,1)):g[d]())})},b.fn.typeahead.defaults={source:[],items:8,menu:'<ul class="typeahead dropdown-menu" role="listbox"></ul>',item:'<li><a href="#" role="option"></a></li>',minLength:1,scrollHeight:0,autoSelect:!0,afterSelect:b.noop,delay:0,addItem:!1},b.fn.typeahead.Constructor=c,b.fn.typeahead.noConflict=function(){return b.fn.typeahead=a,this},b(document).on("focus.typeahead.data-api",'[data-provide="typeahead"]',function(){var d=b(this);d.data("typeahead")||d.typeahead(d.data())})});